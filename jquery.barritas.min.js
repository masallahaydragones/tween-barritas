$.widget("mahd.barritas",{options:{timeline:null,onEnd:null,values:[],colors:[],duration:0,labelSuffix:"%",ease:Cubic.easeOut},tl:null,bars:[],total:0,width:0,init_time:0,customColors:!1,_create:function(){if(_this=this,_this.tl=_this.options.timeline||new TimelineMax,_this.init_time=_this.tl.totalDuration(),_this.options.colors.length===_this.options.values.length&&(_this.customColors=!0),"[object Function]"==Object.prototype.toString.call(this.options.onEnd)&&_this.tl.eventCallback("onComplete",this.options.onEnd),_this.options.values.length<1)throw new Error("need values");_this.element.html(""),_this.width=_this.element.innerWidth(),_this.bars=$.map(_this.options.values,function(a,b){return{element:null,color:_this.customColors?_this.options.colors[b]:"hsla("+(180/_this.options.values.length*b+90)+", 80%, 55%, 1)",value:a,ponderance:0}}),_this.createBars(),_this.ponderateBars(),_this.createAnimations()},_init:function(){},ponderateBars:function(){var a=this;$.each(this.bars,function(b,c){c.ponderance=100*c.value/a.total})},createBars:function(){var a=this;a.total=0;var b=a.element.innerHeight();$.each(a.bars,function(c,d){a.total+=d.value,d.element=$('<div data-role="mahd-barra" data-value="'+d.value+'" class="bar-barrita" />').appendTo(a.element).css({height:b+"px",width:0,"background-color":d.color,display:"inline-block"}),d.label=$('<span class="label-barrita">0'+a.options.labelSuffix+"</span>").css({margin:"0 auto",opacity:0}).appendTo(d.element),d.tempValue=0})},createAnimations:function(){var a=this;$.each(a.bars,function(b,c){a.tl.to(c.element,a.options.duration,{ease:a.options.ease,width:c.ponderance+"%"},a.init_time),a.tl.to(c.label,3*a.options.duration/4,{opacity:1},a.init_time+1*a.options.duration/4),a.tl.to(c,a.options.duration,{ease:Linear.easeNone,tempValue:c.ponderance,onUpdate:function(){c.label.text(parseInt(100*c.tempValue,10)/100+a.options.labelSuffix)}},a.init_time)})},animate:function(){this.tl.play(this.init_time)},get:function(){return this.tl}});